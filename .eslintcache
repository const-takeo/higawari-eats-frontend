[{"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/App.tsx":"1","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/reportWebVitals.ts":"2","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/routers/logged-out-router.tsx":"3","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/apollo.ts":"4","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/routers/logged-in-router.tsx":"5","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/login.tsx":"6","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/index.tsx":"7","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/create-account.tsx":"8","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/components/form-error.tsx":"9","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/components/button.tsx":"10","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/__generated__/globalTypes.ts":"11","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/404.tsx":"12","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/client/restaurants.tsx":"13","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/components/header.tsx":"14","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/user/confirm-email.tsx":"15","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/hooks/useMe.tsx":"16"},{"size":588,"mtime":1611482864802,"results":"17","hashOfConfig":"18"},{"size":425,"mtime":1611383438987,"results":"19","hashOfConfig":"18"},{"size":584,"mtime":1611623515161,"results":"20","hashOfConfig":"18"},{"size":1041,"mtime":1611576566412,"results":"21","hashOfConfig":"18"},{"size":1248,"mtime":1611637545107,"results":"22","hashOfConfig":"18"},{"size":4331,"mtime":1611637369189,"results":"23","hashOfConfig":"18"},{"size":619,"mtime":1611415477967,"results":"24","hashOfConfig":"18"},{"size":4836,"mtime":1611579055580,"results":"25","hashOfConfig":"18"},{"size":241,"mtime":1611550490314,"results":"26","hashOfConfig":"18"},{"size":506,"mtime":1611546035583,"results":"27","hashOfConfig":"18"},{"size":761,"mtime":1611637205550,"results":"28","hashOfConfig":"18"},{"size":586,"mtime":1611624026575,"results":"29","hashOfConfig":"18"},{"size":83,"mtime":1611623226632,"results":"30","hashOfConfig":"18"},{"size":1509,"mtime":1611636813214,"results":"31","hashOfConfig":"18"},{"size":1824,"mtime":1611641074687,"results":"32","hashOfConfig":"18"},{"size":311,"mtime":1611630339155,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1o4rm3h",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/App.tsx",[],["71","72"],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/reportWebVitals.ts",[],["73","74"],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/routers/logged-out-router.tsx",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/apollo.ts",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/routers/logged-in-router.tsx",["75"],"import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { Header } from \"../components/header\";\nimport { useMe } from \"../hooks/useMe\";\nimport { NotFound } from \"../pages/404\";\nimport { Restaurants } from \"../pages/client/restaurants\";\nimport { ConfirmEmail } from \"../pages/user/confirm-email\";\n\n//switchはchildとしてrouteしか持つ事ができない、だがClientRoutesはfragment <></>をreturnするからエラーになる。\n//直し方は簡単arrayし変える。\nconst ClientRoutes = [\n  <Route path=\"/\" exact>\n    <Restaurants />\n  </Route>,\n  <Route path=\"/confirm\" exact>\n    <ConfirmEmail />\n  </Route>,\n];\n\nconst LoggedInRouter = () => {\n  const { data, error, loading } = useMe();\n  if (loading || error || !data) {\n    return (\n      <div className=\"h-screen flex justify-center items-center\">\n        <span className=\"font-medium text-2xl\">Loading...</span>\n      </div>\n    );\n  }\n  return (\n    <Router>\n      <Header />\n      <Switch>\n        {data.me.role === \"Client\" && ClientRoutes}\n        {/* <Redirect to=\"/\" /> */}\n        <Route>\n          <NotFound />\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default LoggedInRouter;\n","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/login.tsx",["76"],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/index.tsx",[],["77","78"],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/create-account.tsx",["79"],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/components/form-error.tsx",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/components/button.tsx",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/__generated__/globalTypes.ts",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/404.tsx",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/client/restaurants.tsx",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/components/header.tsx",[],"/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/pages/user/confirm-email.tsx",["80","81","82","83"],"import { gql, useApolloClient, useMutation } from \"@apollo/client\";\nimport React, { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useMe } from \"../../hooks/useMe\";\nimport {\n  verifyEmail,\n  verifyEmailVariables,\n} from \"../../__generated__/verifyEmail\";\n\nconst VERIFY_EMAIL_MUTATION = gql`\n  mutation verifyEmail($input: VerifyEmailInput!) {\n    verifyEmail(input: $input) {\n      error\n      ok\n    }\n  }\n`;\n\nexport const ConfirmEmail = () => {\n  const client = useApolloClient();\n  const { data: userData } = useMe();\n  const onCompleted = (data: verifyEmail) => {\n    const {\n      verifyEmail: { error, ok },\n    } = data;\n    if (ok && userData?.me.id) {\n        //cacheを直接修正する方法\n      client.writeFragment({\n        id: `UserEntity:${userData.me.id}`,\n        fragment: gql`\n          fragment VerifiedUser on UserEntity {\n            verified\n          }\n        `,\n        data: {\n          verified: true,\n        },\n      });\n    }\n  };\n  const [verifyTrg] = useMutation<verifyEmail, verifyEmailVariables>(\n    VERIFY_EMAIL_MUTATION,\n    {\n      onCompleted,\n    }\n  );\n  // hrefのコードを持ってくる１番目のoption\n  // const location = useLocation();\n  useEffect(() => {\n    // console.log(location.search);\n    const [_, code] = window.location.href.split(\"confirm?=\");\n    console.log(code);\n    verifyTrg({\n      variables: {\n        input: {\n          code,\n        },\n      },\n    });\n  }, []);\n  return (\n    <div className=\"flex flex-col text-center h-screen mt-60\">\n      <h2 className=\"text-lg font-semibold mb-2\">\n        アカウントを認証しています。\n      </h2>\n      <h4 className=\"text-gray-700\">\n        少々お待ちください。このページから離れないでください。\n      </h4>\n    </div>\n  );\n};\n","/Users/takeo/code/React/ReactJS/higawari-eats-frontend/src/hooks/useMe.tsx",["84"],{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"85","replacedBy":"89"},{"ruleId":"87","replacedBy":"90"},{"ruleId":"91","severity":1,"message":"92","line":4,"column":3,"nodeType":"93","messageId":"94","endLine":4,"endColumn":11},{"ruleId":"95","severity":1,"message":"96","line":77,"column":9,"nodeType":"97","endLine":77,"endColumn":58},{"ruleId":"85","replacedBy":"98"},{"ruleId":"87","replacedBy":"99"},{"ruleId":"91","severity":1,"message":"100","line":56,"column":16,"nodeType":"93","messageId":"94","endLine":56,"endColumn":21},{"ruleId":"91","severity":1,"message":"101","line":3,"column":10,"nodeType":"93","messageId":"94","endLine":3,"endColumn":21},{"ruleId":"91","severity":1,"message":"100","line":24,"column":22,"nodeType":"93","messageId":"94","endLine":24,"endColumn":27},{"ruleId":"91","severity":1,"message":"102","line":51,"column":12,"nodeType":"93","messageId":"94","endLine":51,"endColumn":13},{"ruleId":"103","severity":1,"message":"104","line":60,"column":6,"nodeType":"105","endLine":60,"endColumn":8,"suggestions":"106"},{"ruleId":"91","severity":1,"message":"107","line":2,"column":8,"nodeType":"93","messageId":"94","endLine":2,"endColumn":13},"no-native-reassign",["108"],"no-negated-in-lhs",["109"],["108"],["109"],"@typescript-eslint/no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["108"],["109"],"'error' is assigned a value but never used.","'useLocation' is defined but never used.","'_' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'verifyTrg'. Either include it or remove the dependency array.","ArrayExpression",["110"],"'React' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"111","fix":"112"},"Update the dependencies array to be: [verifyTrg]",{"range":"113","text":"114"},[1428,1430],"[verifyTrg]"]